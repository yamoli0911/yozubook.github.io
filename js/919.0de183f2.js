"use strict";(self["webpackChunkyozubook0_2"]=self["webpackChunkyozubook0_2"]||[]).push([[919],{8919:function(t,a,e){e.r(a),e.d(a,{default:function(){return Q}});var s=e(6768),o=e(5130),r=e(4232);const d=t=>((0,s.Qi)("data-v-5bf546a8"),t=t(),(0,s.jt)(),t),c=d((()=>(0,s.Lk)("br",{class:"for-ph"},null,-1))),l=d((()=>(0,s.Lk)("br",{class:"for-ph"},null,-1))),i=d((()=>(0,s.Lk)("br",{class:"for-ph"},null,-1))),n={class:"row content"},u={class:"col-12"},g={class:"input-group mb-3"},h={class:"row content"},p={class:"col-md-3"},v=d((()=>(0,s.Lk)("div",{class:"form-check h3 title-bg-color shadow-sm p-2 rounded bg01"},"類別",-1))),k=["for"],m=["value"],b={class:"card-group col-md-9"};function w(t,a,e,d,w,f){const C=(0,s.g2)("Loading"),L=(0,s.g2)("Card");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(C,{active:w.isLoading},null,8,["active"]),c,l,i,(0,s.Lk)("div",n,[(0,s.Lk)("div",u,[(0,s.Lk)("div",g,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=t=>w.search=t),placeholder:"輸入漫畫或小說名稱","aria-label":"Recipient's username","aria-describedby":"button-addon2"},null,512),[[o.Jo,w.search]])])])]),(0,s.Lk)("div",h,[(0,s.Lk)("div",p,[v,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(w.tagall,(t=>((0,s.uX)(),(0,s.CE)("div",{class:(0,r.C4)([{bg02:w.tagNow===t.value},"tagnow form-check shadow-sm p-2 bg-white rounded"])},[(0,s.Lk)("label",{class:"form-check-label tagnow",for:t.id},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>w.tagNow=t),class:"form-check-input",type:"radio",value:t.value,id:"item.id",style:{opacity:"0"}},null,8,m),[[o.XL,w.tagNow]]),(0,s.eW)(" "+(0,r.v_)(t.name),1)],8,k)],2)))),256))]),(0,s.Lk)("div",b,[(0,s.bF)(L,{getCardProducts:w.products,getTagNow:w.tagNow,getSearch:w.search},null,8,["getCardProducts","getTagNow","getSearch"])])])],64)}const f=t=>((0,s.Qi)("data-v-c0d1de6e"),t=t(),(0,s.jt)(),t),C={class:"row row-cols-1 row-cols-md-3 g-2 w-100"},L={class:"card"},y={class:"tagbox tag d-flex justify-content-start"},N={class:"badge bg02"},P=["onClick"],I={class:"card-body"},S={class:"card-title card-text"},_={class:"card-text"},X=["onClick","disabled"],E={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},x=f((()=>(0,s.Lk)("span",{class:"visually-hidden"},"Loading...",-1))),F=[x];function T(t,a,e,d,c,l){const i=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",C,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.filterProducts,(t=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{class:"col",key:t},[(0,s.Lk)("div",L,[(0,s.bF)(i,{to:`book/${t.id}`,src:"#",class:"card-img-top cardimg",style:(0,r.Tr)({backgroundImage:"url("+t.imageUrl+")"}),alt:"..."},{default:(0,s.k6)((()=>[(0,s.Lk)("div",y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.booktag,(t=>((0,s.uX)(),(0,s.CE)("span",N,(0,r.v_)(t),1)))),256))])])),_:2},1032,["to","style"]),(0,s.Lk)("span",{class:"badge bg-danger save",onClick:a=>l.staredData(t)},[(0,s.Lk)("i",{class:(0,r.C4)([l.starColor(t),"fa fa-bookmark"]),"aria-hidden":"true"},null,2)],8,P),(0,s.Lk)("div",I,[(0,s.Lk)("h5",S,(0,r.v_)(t.title),1),(0,s.Lk)("p",_,"售價: "+(0,r.v_)(t.price)+"元",1),(0,s.Lk)("button",{class:"cart-btn w-100 bg01",onClick:a=>l.addCart(t.id),disabled:c.status.loadingItem===t.id},[(0,s.eW)("加入購物車 "),c.status.loadingItem===t.id?((0,s.uX)(),(0,s.CE)("div",E,F)):(0,s.Q3)("",!0)],8,X)])])])),[[o.aG,-1!=t.title.indexOf(c.search)]]))),128))])}e(4114);var z={props:["getCardProducts","getTagNow","getSearch"],data(){return{cardProduct:[],status:{loadingItem:""},cardNow:"",search:"",stared:JSON.parse(localStorage.getItem("stared"))||[],stared_title:""}},provide:{toStatus:"hi"},watch:{getCardProducts(){this.cardProduct=this.getCardProducts},getTagNow(){this.cardNow=this.getTagNow},getSearch(){this.search=this.getSearch,console.log("hi"+this.getSearch)}},methods:{starColor(t){const a=this;let e=!1;return e=a.stared.some((a=>a.title===t.title)),e?"savenow":""},staredData(t){const a=this;let e=!1;if(e=a.stared.some((a=>a.title===t.title)),e)return a.stared=a.stared.filter((a=>a.title!==t.title)),void localStorage.setItem("stared",JSON.stringify(a.stared));a.stared.push(t),localStorage.setItem("stared",JSON.stringify(a.stared))},addCart(t){const a=this;a.status.loadingItem=t;const e="https://vue3-course-api.hexschool.io/api/yozubook011/cart",s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{a.status.loadingItem="",console.log(t),this.$emitter.emit("sendProduct",t.data)}))}},computed:{filterProducts(){const t=this;return t.cardNow.length?t.cardProduct.filter((a=>a.booktag.includes(t.cardNow))):t.cardProduct}},created(){this.cardProduct=this.getCardProducts,this.cardNow=this.getTagNow,this.search=this.getSearch}},J=e(1241);const K=(0,J.A)(z,[["render",T],["__scopeId","data-v-c0d1de6e"]]);var O=K,$={components:{Card:O},data(){return{products:[],isLoading:!1,search:"",tagall:[{name:"全部",value:""},{name:"少年",value:"少年"},{name:"百合",value:"百合"},{name:"戀愛",value:"戀愛"},{name:"奇幻冒險",value:"奇幻冒險"},{name:"青春校園",value:"青春校園"},{name:"日常",value:"日常"},{name:"鬼神",value:"鬼神"},{name:"社會寫實",value:"社會寫實"},{name:"搞笑",value:"搞笑"},{name:"誤解系",value:"誤解系"}],tagNow:""}},methods:{getProducts(){const t=this,a="https://vue3-course-api.hexschool.io/api/yozubook011/products/all";console.log(a),t.isLoading=!0,this.$http.get(a).then((a=>{a.data.success?(t.products=a.data.products,console.log(t.products.booktag),t.isLoading=!1):alert("尚未得到")}))}},created(){this.getProducts()}};const j=(0,J.A)($,[["render",w],["__scopeId","data-v-5bf546a8"]]);var Q=j}}]);
//# sourceMappingURL=919.0de183f2.js.map