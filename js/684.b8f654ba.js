"use strict";(self["webpackChunkyozubook0_2"]=self["webpackChunkyozubook0_2"]||[]).push([[684],{3684:function(t,o,e){e.r(o),e.d(o,{default:function(){return Wt}});var a=e(6768),l=e(4232);const s={class:"container"},i={class:"d-flex justify-content-end m-4"},d={class:"table mt-4"},n=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{width:"120"},"狀態"),(0,a.Lk)("th",{width:"120"},"分類"),(0,a.Lk)("th",null,"產品名稱"),(0,a.Lk)("th",{width:"120"},"作者"),(0,a.Lk)("th",{width:"120"},"譯者"),(0,a.Lk)("th",{width:"120"},"原價"),(0,a.Lk)("th",{width:"120"},"售價"),(0,a.Lk)("th",{width:"100"},"是否啟用"),(0,a.Lk)("th",{width:"200"},"編輯")])],-1),r={key:0,class:"text-success"},c={key:1,class:"text-success"},u={class:"btn-group"},p=["onClick"],b=["onClick"];function m(t,o,e,m,k,h){const g=(0,a.g2)("Loading"),L=(0,a.g2)("Pagination"),v=(0,a.g2)("ProductModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(g,{active:k.isLoading},null,8,["active"]),(0,a.Lk)("div",s,[(0,a.Lk)("div",i,[(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:o[0]||(o[0]=t=>h.openModal(!0))},"新增產品")]),(0,a.Lk)("table",d,[n,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.products,(t=>((0,a.uX)(),(0,a.CE)("tr",{key:t.id},[(0,a.Lk)("td",null,(0,l.v_)(h.tostring(t.state)),1),(0,a.Lk)("td",null,(0,l.v_)(h.tostring(t.booktag)),1),(0,a.Lk)("td",null,(0,l.v_)(t.title),1),(0,a.Lk)("td",null,(0,l.v_)(t.creator),1),(0,a.Lk)("td",null,(0,l.v_)(t.translator),1),(0,a.Lk)("td",null,(0,l.v_)(t.origin_price),1),(0,a.Lk)("td",null,(0,l.v_)(t.origin_price),1),(0,a.Lk)("td",null,[t.is_enabled?((0,a.uX)(),(0,a.CE)("span",r,"啟用")):((0,a.uX)(),(0,a.CE)("span",c,"不啟用"))]),(0,a.Lk)("td",null,[(0,a.Lk)("div",u,[(0,a.Lk)("button",{onClick:o=>h.openModal(!1,t),class:"btn btn-outline-primary btn-sm"},"編輯",8,p),(0,a.Lk)("button",{onClick:o=>h.deleteModal(t),class:"btn btn-outline-danger btn-sm"},"刪除",8,b)])])])))),128))])])]),(0,a.bF)(L,{onEmitPages:h.getProducts,pages:k.pagination},null,8,["onEmitPages","pages"]),(0,a.bF)(v,{ref:"productModal",product:k.tempProduct,onUpdataProduct:h.updateProduct},null,8,["product","onUpdataProduct"])],64)}var k=e(5130);const h=t=>((0,a.Qi)("data-v-b0107962"),t=t(),(0,a.jt)(),t),g={ref:"modal",class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},L={class:"modal-dialog modal-xl",role:"document"},v={class:"modal-content border-0"},f=h((()=>(0,a.Lk)("div",{class:"modal-header bg-dark text-white"},[(0,a.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,a.Lk)("span",null,"新增產品")]),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),P={class:"modal-body"},y={class:"row"},x={class:"col-sm-4"},_=h((()=>(0,a.Lk)("div",{class:"mb-3"},[(0,a.Lk)("label",{for:"image",class:"form-label"},"輸入圖片網址"),(0,a.Lk)("input",{type:"text",class:"form-control",id:"image",placeholder:"請輸入圖片連結"})],-1))),w={class:"mb-3"},C=h((()=>(0,a.Lk)("label",{for:"customFile",class:"form-label"},[(0,a.eW)("或 上傳圖片 "),(0,a.Lk)("i",{class:"fas fa-spinner fa-spin"})],-1))),M=(0,a.Fv)('<img class="img-fluid" alt="" data-v-b0107962><div class="mt-5" data-v-b0107962><div class="mb-3 input-group" data-v-b0107962><input type="url" class="form-control form-control" placeholder="請輸入連結" data-v-b0107962><button type="button" class="btn btn-outline-danger" data-v-b0107962> 移除 </button></div><div data-v-b0107962><button class="btn btn-outline-primary btn-sm d-block w-100" data-v-b0107962> 新增圖片 </button></div></div>',2),U={class:"col-sm-8"},F={class:"mb-3"},$=h((()=>(0,a.Lk)("label",{for:"title",class:"form-label"},"標題",-1))),E={class:"row gx-2"},V={class:"mb-3 col-md-6"},X=h((()=>(0,a.Lk)("br",null,null,-1))),J=["value","id"],z=["for"],I={class:"mb-3 col-md-6 btn-group6"},D=h((()=>(0,a.Lk)("br",null,null,-1))),K=["value","id"],j=["for"],N={class:"row gx-2"},A={class:"mb-3 col-md-6"},H=h((()=>(0,a.Lk)("label",{for:"price",class:"form-label"},"售價",-1))),W={class:"mb-3 col-md-6"},B=h((()=>(0,a.Lk)("label",{for:"origin_price",class:"form-label"},"原價",-1))),O={class:"row gx-2"},Q={class:"mb-3 col-md-6"},S=h((()=>(0,a.Lk)("label",{for:"creator",class:"form-label"},"作者",-1))),q={class:"mb-3 col-md-6"},G=h((()=>(0,a.Lk)("label",{for:"publishing",class:"form-label"},"出版社",-1))),R=(0,a.Fv)('<option selected data-v-b0107962> 請輸入出版社</option><option value="東立" data-v-b0107962>東立</option><option value="青文" data-v-b0107962>青文</option><option value="角川" data-v-b0107962>角川</option><option value="尖川" data-v-b0107962>尖端</option>',5),T=[R],Y={class:"row gx-2"},Z={class:"mb-3 col-md-6"},tt=h((()=>(0,a.Lk)("label",{for:"translator",class:"form-label"},"譯者",-1))),ot={class:"mb-3 col-md-6"},et=h((()=>(0,a.Lk)("label",{for:"bookdate",class:"form-label"},"出版日期",-1))),at={class:"row gx-2"},lt={class:"mb-3 col-md-4"},st=h((()=>(0,a.Lk)("label",{for:"unit",class:"form-label"},"單位",-1))),it={class:"mb-3 col-md-4"},dt=h((()=>(0,a.Lk)("label",{for:"num",class:"form-label"},"數量",-1))),nt={class:"mb-3 col-md-4"},rt=h((()=>(0,a.Lk)("label",{for:"categoryr",class:"form-label"},"分級",-1))),ct=(0,a.Fv)('<option selected data-v-b0107962> 請輸入分級</option><option value="普通級" data-v-b0107962>普通級</option><option value="保護級" data-v-b0107962>保護級</option><option value="輔十二" data-v-b0107962>輔十二</option><option value="輔十五" data-v-b0107962>輔十五</option><option value="限制級" data-v-b0107962>限制級</option>',6),ut=[ct],pt=h((()=>(0,a.Lk)("hr",null,null,-1))),bt={class:"mb-3"},mt=h((()=>(0,a.Lk)("label",{for:"description",class:"form-label"},"作品描述",-1))),kt={class:"mb-3"},ht={class:"form-check"},gt=h((()=>(0,a.Lk)("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1))),Lt={class:"modal-footer"},vt=h((()=>(0,a.Lk)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1)));function ft(t,o,e,s,i,d){return(0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("div",L,[(0,a.Lk)("div",v,[f,(0,a.Lk)("div",P,[(0,a.Lk)("div",y,[(0,a.Lk)("div",x,[_,(0,a.Lk)("div",w,[C,(0,a.Lk)("input",{onChange:o[0]||(o[0]=(...t)=>d.uploadFile&&d.uploadFile(...t)),ref:"fileInput",type:"file",id:"customFile",class:"form-control"},null,544)]),M]),(0,a.Lk)("div",U,[(0,a.Lk)("div",F,[$,(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入標題","onUpdate:modelValue":o[1]||(o[1]=t=>i.tempProduct.title=t)},null,512),[[k.Jo,i.tempProduct.title]])]),(0,a.Lk)("div",E,[(0,a.Lk)("div",V,[(0,a.eW)(" 書籍類型 "),X,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.tagall,((t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,style:{"margin-right":"5px","margin-top":"5px"},class:"btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>i.tempProduct.booktag=t),value:t,type:"checkbox",class:"btn-check",id:e,autocomplete:"off"},null,8,J),[[k.lH,i.tempProduct.booktag]]),(0,a.Lk)("label",{class:"btn btn-outline-primary",for:e},(0,l.v_)(t),9,z)])))),128))]),(0,a.Lk)("div",I,[(0,a.eW)(" 狀態 "),D,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.stateall,((t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,role:"group",style:{"margin-right":"5px","margin-top":"5px"},class:"btn-group","aria-label":"Basic checkbox toggle button group"},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>i.tempProduct.state=t),value:t,type:"checkbox",class:"btn-check",id:t,autocomplete:"off"},null,8,K),[[k.lH,i.tempProduct.state]]),(0,a.Lk)("label",{class:"btn btn-outline-primary",for:t},(0,l.v_)(t),9,j)])))),128))])]),(0,a.Lk)("div",N,[(0,a.Lk)("div",A,[H,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>i.tempProduct.price=t),type:"number",class:"form-control",id:"price",placeholder:"請輸入售價"},null,512),[[k.Jo,i.tempProduct.price]])]),(0,a.Lk)("div",W,[B,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>i.tempProduct.origin_price=t),type:"number",class:"form-control",id:"origin_price",placeholder:"請輸入原價"},null,512),[[k.Jo,i.tempProduct.origin_price]])])]),(0,a.Lk)("div",O,[(0,a.Lk)("div",Q,[S,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=t=>i.tempProduct.creator=t),type:"text",class:"form-control",id:"creator",placeholder:"請輸入作者名"},null,512),[[k.Jo,i.tempProduct.creator]])]),(0,a.Lk)("div",q,[G,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[7]||(o[7]=t=>i.tempProduct.publishing=t),class:"form-select","aria-label":"Default select example",id:"publishing"},T,512),[[k.u1,i.tempProduct.publishing]])])]),(0,a.Lk)("div",Y,[(0,a.Lk)("div",Z,[tt,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[8]||(o[8]=t=>i.tempProduct.translator=t),type:"text",class:"form-control",id:"translator",placeholder:"請輸入譯者名"},null,512),[[k.Jo,i.tempProduct.translator]])]),(0,a.Lk)("div",ot,[et,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[9]||(o[9]=t=>i.tempProduct.bookdate=t),type:"text",class:"form-control",id:"bookdate",placeholder:"請輸入出版日期"},null,512),[[k.Jo,i.tempProduct.bookdate]])])]),(0,a.Lk)("div",at,[(0,a.Lk)("div",lt,[st,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[10]||(o[10]=t=>i.tempProduct.unit=t),type:"text",class:"form-control",id:"unit",placeholder:"請輸入單位"},null,512),[[k.Jo,i.tempProduct.unit]])]),(0,a.Lk)("div",it,[dt,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[11]||(o[11]=t=>i.tempProduct.num=t),type:"number",class:"form-control",id:"num",placeholder:"請輸入數量"},null,512),[[k.Jo,i.tempProduct.num]])]),(0,a.Lk)("div",nt,[rt,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[12]||(o[12]=t=>i.tempProduct.category=t),class:"form-select","aria-label":"Default select example",id:"categoryr"},ut,512),[[k.u1,i.tempProduct.category]])])]),pt,(0,a.Lk)("div",bt,[mt,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":o[13]||(o[13]=t=>i.tempProduct.descripiton=t),type:"text",class:"form-control",id:"description",placeholder:"請輸入產品描述"},null,512),[[k.Jo,i.tempProduct.descripiton]])]),(0,a.Lk)("div",kt,[(0,a.Lk)("div",ht,[(0,a.bo)((0,a.Lk)("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":o[14]||(o[14]=t=>i.tempProduct.is_enabled=t)},null,512),[[k.lH,i.tempProduct.is_enabled]]),gt])])])])]),(0,a.Lk)("div",Lt,[vt,(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:o[15]||(o[15]=o=>t.$emit("updata-product",i.tempProduct))},"確認")])])])],512)}var Pt=e(2894),yt=e.n(Pt),xt={props:{product:{type:Object,defalt(){return{}}}},data(){return{modal:{},booktag:[],state:[],tempProduct:{},tagall:["少年","百合","戀愛","奇幻冒險","青春校園","日常","鬼神","社會寫實","搞笑","誤解系"],stateall:["館藏","最新","熱門"]}},watch:{product(){this.product.booktag||(this.product.booktag=this.booktag),this.product.state||(this.product.state=this.state),this.tempProduct.booktag=[],this.tempProduct=this.product}},methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()},showModal(){this.modal.show()},uploadFile(){const t=this.$refs.fileInput.files[0],o=new FormData;o.append("file-to-upload",t);const e="https://vue3-course-api.hexschool.io/api/yozubook011/admin/upload";this.$http.post(e,o).then((t=>{t.data.success?this.tempProduct.imageUrl=t.data.imageUrl:alert("尚未得到")}))}},mounted(){this.modal=new(yt())(this.$refs.modal)}},_t=e(1241);const wt=(0,_t.A)(xt,[["render",ft],["__scopeId","data-v-b0107962"]]);var Ct=wt;const Mt={"aria-label":"Page navigation example"},Ut={class:"pagination justify-content-center"},Ft={class:"page-item"},$t=(0,a.Lk)("span",{"aria-hidden":"true"},"«",-1),Et=[$t],Vt=["onClick"],Xt={class:"page-item"},Jt=(0,a.Lk)("span",{"aria-hidden":"true"},"»",-1),zt=[Jt];function It(t,o,e,s,i,d){return(0,a.uX)(),(0,a.CE)("nav",Mt,[(0,a.Lk)("ul",Ut,[(0,a.Lk)("li",Ft,[(0,a.Lk)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:o[0]||(o[0]=(0,k.D$)((t=>d.prevPage()),["prevent"]))},Et)]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.pages.total_pages,(t=>((0,a.uX)(),(0,a.CE)("li",{class:(0,l.C4)(["page-item",{acitve:t===e.pages.current_page}]),key:t},[(0,a.Lk)("a",{class:"page-link",href:"#",onClick:(0,k.D$)((o=>d.updatePage(t)),["prevent"])},(0,l.v_)(t),9,Vt)],2)))),128)),(0,a.Lk)("li",Xt,[(0,a.Lk)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:o[1]||(o[1]=(0,k.D$)((t=>d.nextPage()),["prevent"]))},zt)])])])}var Dt={props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)},watch:{pages(){alert("hi"),this.updatePage(this.pages.current_page)}},nextPage(){this.pages.current_page++,this.updatePage(this.pages.current_page)},prevPage(){this.pages.current_page--,this.updatePage(this.pages.current_page)}}};const Kt=(0,_t.A)(Dt,[["render",It]]);var jt=Kt;function Nt(t){let o="";return t?o=t.toString():t="",o}var At={data(){return{isLoading:!1,products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1}},components:{ProductModal:Ct,Pagination:jt},methods:{tostring:Nt,getProducts(t=1){const o=this;o.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/yozubook011/admin/products/?page=${t}`;this.$http.get(e).then((t=>{t.data.success?(this.products=t.data.products,this.pagination=t.data.pagination,console.log(this.pagination),o.isLoading=!1):alert("尚未得到")}))},openModal(t,o){this.tempProduct=t?{}:{...o},this.isNew=t;const e=this.$refs.productModal;e.showModal()},updateProduct(t){this.tempProduct=t;let o="https://vue3-course-api.hexschool.io/api/yozubook011/admin/product",e="post";this.isNew||(o=`https://vue3-course-api.hexschool.io/api/yozubook011/admin/product/${t.id}`,e="put");const a=this.$refs.productModal;this.$http[e](o,{data:this.tempProduct}).then((t=>{console.log(t),a.hideModal(),this.getProducts()}))},deleteModal(t){const o=this,e=`https://vue3-course-api.hexschool.io/api/yozubook011/admin/product/${t.id}`;this.$http.delete(e).then((t=>{t.data.success&&(console.log(t),alert("成功刪除"),o.getProducts())}))}},created(){this.getProducts()}};const Ht=(0,_t.A)(At,[["render",m]]);var Wt=Ht}}]);
//# sourceMappingURL=684.b8f654ba.js.map